import{d as _,i as c,z as e,q as g,g as r,b as k,h as s,c as m}from"./q-BrAWZM5D.js";import{p as y}from"./q-CVtgbu2y.js";import{p as b}from"./q-C2EB_Z9y.js";import{_ as p}from"./q-DoNi8vyY.js";import{R as v}from"./q-CxvojXWr.js";import{u as h}from"./q-Dffzb0DX.js";const w=()=>{const[t]=_();return t("/gestione/kata")},S=Object.freeze(Object.defineProperty({__proto__:null,s_iIbQeC29MlY:w},Symbol.toStringTag,{value:"Module"})),C=async t=>{const[n,o,i,u]=_();t.preventDefault(),o.value=!0,n.value=null;const a=t.target,l=new FormData(a),f=d=>(d||"untitled").toLowerCase().replace(/[àáâãäå]/g,"a").replace(/[èéêë]/g,"e").replace(/[ìíîï]/g,"i").replace(/[òóôõö]/g,"o").replace(/[ùúûü]/g,"u").replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").substring(0,100),x=l.get("titolo");l.get("slug")||l.append("slug",f(x));try{u.isNew?await b.collection("kata").create(l):await b.collection("kata").update(u.kata.id,l),i("/gestione/kata")}catch(d){n.value=y(d),window.scrollTo({top:0,behavior:"smooth"})}finally{o.value=!1}},j=Object.freeze(Object.defineProperty({__proto__:null,_hW:m,s_uKt3CWlrhbY:C},Symbol.toStringTag,{value:"Module"})),E=t=>{const n=h(),o=c(!1),i=c(null);return e("div",null,{class:"max-w-4xl mx-auto"},e("form",null,{class:"space-y-10 animate-in fade-in slide-in-from-bottom-4 duration-700",onSubmit$:g(()=>p(()=>Promise.resolve().then(()=>j),void 0),"s_uKt3CWlrhbY",[i,o,n,t])},[i.value&&e("div",null,{class:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-100 dark:border-red-800 rounded-2xl text-red-600 dark:text-red-400 font-bold flex items-center gap-3"},[e("span",null,null,"⚠️",3,null),r(a=>a.value,[i])],3,"W6_0"),e("div",null,{class:"grid grid-cols-1 md:grid-cols-2 gap-8"},[e("div",null,{class:"space-y-2"},[e("label",null,{class:"block text-xs font-black text-gray-400 uppercase tracking-widest px-1"},"Nome Kata",3,null),e("input",null,{type:"text",name:"titolo",required:!0,value:r(a=>{var l;return(l=a.kata)==null?void 0:l.titolo},[t]),placeholder:"es. Nage No Kata",class:"w-full px-5 py-4 rounded-2xl bg-white dark:bg-gray-900 border border-gray-100 dark:border-gray-800 focus:ring-4 focus:ring-red-500/10 focus:border-red-500 outline-none transition-all dark:text-white font-bold"},null,3,null)],3,null),e("div",null,{class:"space-y-2"},[e("label",null,{class:"block text-xs font-black text-gray-400 uppercase tracking-widest px-1"},"Nome in Giapponese",3,null),e("input",null,{type:"text",name:"titolo_secondario",value:r(a=>{var l;return(l=a.kata)==null?void 0:l.titolo_secondario},[t]),placeholder:"es. 投の形",class:"w-full px-5 py-4 rounded-2xl bg-white dark:bg-gray-900 border border-gray-100 dark:border-gray-800 focus:ring-4 focus:ring-red-500/10 focus:border-red-500 outline-none transition-all dark:text-white font-bold"},null,3,null)],3,null)],3,null),e("div",null,{class:"grid grid-cols-1 md:grid-cols-2 gap-8"},[e("div",null,{class:"space-y-2"},[e("label",null,{class:"block text-xs font-black text-gray-400 uppercase tracking-widest px-1"},"Livello (Dan)",3,null),e("input",null,{type:"number",name:"livello",value:r(a=>{var l;return((l=a.kata)==null?void 0:l.livello)||1},[t]),min:"1",max:"6",class:"w-full px-5 py-4 rounded-2xl bg-white dark:bg-gray-900 border border-gray-100 dark:border-gray-800 focus:ring-4 focus:ring-red-500/10 focus:border-red-500 outline-none transition-all dark:text-white font-bold"},null,3,null)],3,null),e("div",null,{class:"space-y-2"},[e("label",null,{class:"block text-xs font-black text-gray-400 uppercase tracking-widest px-1"},"YouTube Video URL",3,null),e("input",null,{type:"url",name:"video_link",value:r(a=>{var l;return(l=a.kata)==null?void 0:l.video_link},[t]),placeholder:"https://www.youtube.com/watch?v=...",class:"w-full px-5 py-4 rounded-2xl bg-white dark:bg-gray-900 border border-gray-100 dark:border-gray-800 focus:ring-4 focus:ring-red-500/10 focus:border-red-500 outline-none transition-all dark:text-white font-bold"},null,3,null)],3,null)],3,null),e("div",null,{class:"space-y-2"},[e("label",null,{class:"block text-xs font-black text-gray-400 uppercase tracking-widest px-1"},"Contenuto / Descrizione",3,null),k(v,{name:"contenuto",id:"contenuto",get value(){var a;return(a=t.kata)==null?void 0:a.contenuto},placeholder:"Origini, significato tecnico e punti chiave del Kata...",[s]:{name:s,id:s,value:r(a=>{var l;return(l=a.kata)==null?void 0:l.contenuto},[t]),placeholder:s}},3,"W6_1")],1,null),e("div",null,{class:"pt-10 border-t border-gray-100 dark:border-gray-800 flex justify-end gap-4"},[e("button",null,{type:"button",class:"px-8 py-4 rounded-2xl font-bold text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-800 transition-all",onClick$:g(()=>p(()=>Promise.resolve().then(()=>S),void 0),"s_iIbQeC29MlY",[n])},"Annulla",3,null),e("button",null,{type:"submit",disabled:r(a=>a.value,[o]),class:"px-10 py-4 rounded-2xl bg-gray-900 dark:bg-white text-white dark:text-black font-black text-lg shadow-xl shadow-black/10 hover:transform hover:-translate-y-1 transition-all disabled:opacity-50"},r((a,l)=>a.value?"Salvataggio...":l.isNew?"Crea Kata":"Salva Modifiche",[o,t]),3,null)],3,null)],1,null),1,"W6_2")},D=Object.freeze(Object.defineProperty({__proto__:null,s_EngVqGaeK0I:E},Symbol.toStringTag,{value:"Module"}));export{m as _hW,D as k,E as s_EngVqGaeK0I,w as s_iIbQeC29MlY,C as s_uKt3CWlrhbY};
