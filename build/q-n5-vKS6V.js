import{d as g,i as b,l as y,q as d,z as e,g as s,b as x,h as _,c as v}from"./q-BrAWZM5D.js";import{p as h}from"./q-CVtgbu2y.js";import{p as f}from"./q-C2EB_Z9y.js";import{_ as c}from"./q-DoNi8vyY.js";import{R as k}from"./q-CxvojXWr.js";import{u as w}from"./q-CT5_i-05.js";const S=async t=>{const[n,o,i,a]=g();t.preventDefault(),o.value=!0,n.value=null;const m=t.target,u=new FormData(m),p=r=>(r||"untitled").toLowerCase().replace(/[Ã Ã¡Ã¢Ã£Ã¤Ã¥]/g,"a").replace(/[Ã¨Ã©ÃªÃ«]/g,"e").replace(/[Ã¬Ã­Ã®Ã¯]/g,"i").replace(/[Ã²Ã³Ã´ÃµÃ¶]/g,"o").replace(/[Ã¹ÃºÃ»Ã¼]/g,"u").replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").substring(0,100),l=u.get("titolo");u.get("slug")||u.append("slug",p(l));try{a.isNew?await f.collection("dizionario").create(u):await f.collection("dizionario").update(a.term.id,u),i("/gestione/dizionario")}catch(r){n.value=h(r),window.scrollTo({top:0,behavior:"smooth"})}finally{o.value=!1}},P=Object.freeze(Object.defineProperty({__proto__:null,_hW:v,s_oLvQleq6AwU:S},Symbol.toStringTag,{value:"Module"})),j=()=>{const[t]=g();return t("/gestione/dizionario")},A=Object.freeze(Object.defineProperty({__proto__:null,s_PlUU0pDGBQ0:j},Symbol.toStringTag,{value:"Module"})),z=t=>{const[n]=g(),o=t.target;if(o.files&&o.files[0]){const i=URL.createObjectURL(o.files[0]);n.value=i}},M=Object.freeze(Object.defineProperty({__proto__:null,_hW:v,s_1K80MJWNg0Y:z},Symbol.toStringTag,{value:"Module"})),O=t=>{var p;const n=w(),o=b(!1),i=b(null),a=b(null);y(d(()=>c(()=>Promise.resolve().then(()=>E),void 0),"s_EL7rnMcdsok",[a,t]));const m=d(()=>c(()=>Promise.resolve().then(()=>M),void 0),"s_1K80MJWNg0Y",[a]);return e("div",null,{class:"max-w-4xl mx-auto"},e("form",null,{class:"space-y-10 animate-in fade-in slide-in-from-bottom-4 duration-700",onSubmit$:d(()=>c(()=>Promise.resolve().then(()=>P),void 0),"s_oLvQleq6AwU",[i,o,n,t])},[i.value&&e("div",null,{class:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-100 dark:border-red-800 rounded-2xl text-red-600 dark:text-red-400 font-bold flex items-center gap-3"},[e("span",null,null,"âš ï¸",3,null),s(l=>l.value,[i])],3,"0z_0"),e("div",null,{class:"grid grid-cols-1 md:grid-cols-2 gap-8"},[e("div",null,{class:"space-y-6"},[e("div",null,{class:"space-y-2"},[e("label",null,{class:"block text-xs font-black text-gray-400 uppercase tracking-widest px-1"},"Termine",3,null),e("input",null,{type:"text",name:"titolo",required:!0,value:s(l=>{var r;return(r=l.term)==null?void 0:r.titolo},[t]),placeholder:"es. Dojo",class:"w-full px-5 py-4 rounded-2xl bg-white dark:bg-gray-900 border border-gray-100 dark:border-gray-800 focus:ring-4 focus:ring-emerald-500/10 focus:border-emerald-500 outline-none transition-all dark:text-white font-bold"},null,3,null)],3,null),e("div",null,{class:"space-y-2"},[e("label",null,{class:"block text-xs font-black text-gray-400 uppercase tracking-widest px-1"},"Kanji",3,null),e("input",null,{type:"text",name:"titolo_secondario",value:s(l=>{var r;return(r=l.term)==null?void 0:r.titolo_secondario},[t]),placeholder:"es. é“å ´",class:"w-full px-5 py-4 rounded-2xl bg-white dark:bg-gray-900 border border-gray-100 dark:border-gray-800 focus:ring-4 focus:ring-emerald-500/10 focus:border-emerald-500 outline-none transition-all dark:text-white font-serif text-xl"},null,3,null)],3,null),e("div",null,{class:"space-y-2"},[e("label",null,{class:"block text-xs font-black text-gray-400 uppercase tracking-widest px-1"},"Pronuncia",3,null),e("input",null,{type:"text",name:"categoria_secondaria",value:s(l=>{var r;return(r=l.term)==null?void 0:r.categoria_secondaria},[t]),placeholder:"es. doo-joo",class:"w-full px-5 py-4 rounded-2xl bg-white dark:bg-gray-900 border border-gray-100 dark:border-gray-800 focus:ring-4 focus:ring-emerald-500/10 focus:border-emerald-500 outline-none transition-all dark:text-white font-medium"},null,3,null)],3,null)],3,null),e("div",null,{class:"space-y-6"},e("div",null,{class:"space-y-2"},[e("div",null,{class:"relative group"},e("div",null,{class:"h-[100px] rounded-3xl bg-gray-50 dark:bg-gray-800/50 border-2 border-dashed border-gray-200 dark:border-gray-700 flex flex-col items-center justify-center relative shadow-inner transition-colors group-hover:bg-gray-100 dark:group-hover:bg-gray-800 focus-within:ring-2 focus-within:ring-emerald-500"},[e("div",null,{class:"text-center"},[e("span",null,{class:"text-2xl block mb-1"},"ðŸŽ™ï¸",3,null),e("span",null,{class:"text-[10px] font-black text-gray-400 uppercase tracking-widest"},s(l=>l.value?"Sostituisci Audio":"Carica MP3",[a]),3,null)],3,null),e("input",null,{type:"file",name:"audio",accept:"audio/mpeg, audio/mp3",class:"absolute inset-0 opacity-0 cursor-pointer z-10",onChange$:m},null,3,null)],3,null),3,null),a.value&&e("div",null,{class:"p-4 mt-4 rounded-3xl bg-white dark:bg-gray-900 border border-gray-100 dark:border-gray-800 shadow-sm animate-in fade-in slide-in-from-top-2 duration-500"},[e("div",null,{class:"flex items-center gap-3 mb-3"},[e("span",null,{class:"text-2xl"},"ðŸŽµ",3,null),e("div",null,{class:"flex-1 min-w-0"},[e("span",null,{class:"text-[9px] font-black text-emerald-600 uppercase tracking-widest block"},"Preview Pronuncia",3,null),e("p",null,{class:"text-[10px] text-gray-400 font-mono truncate"},((p=t.term)==null?void 0:p.audio)||(a.value.startsWith("blob:")?"Nuovo File":"File di Sistema"),1,null)],1,null)],1,null),e("div",null,{class:"flex items-center gap-2"},[e("audio",null,{src:s(l=>l.value,[a]),controls:!0,class:"h-10 flex-1 opacity-90"},null,3,a.value),e("button",null,{type:"button",class:"p-3 bg-emerald-600 text-white rounded-2xl shadow-lg shadow-emerald-500/20 hover:scale-105 active:scale-95 transition-all",onClick$:d(()=>c(()=>Promise.resolve().then(()=>D),void 0),"s_QcrNlhN3hpg",[a])},"â–¶ï¸",3,null)],3,null)],1,"0z_1")],1,null),1,null)],1,null),e("div",null,{class:"space-y-2"},[e("label",null,{class:"block text-xs font-black text-gray-400 uppercase tracking-widest px-1"},"Contenuto / Descrizione",3,null),x(k,{name:"contenuto",id:"contenuto",get value(){var l;return(l=t.term)==null?void 0:l.contenuto},placeholder:"Significato storico, tecnico o filosofico del termine...",[_]:{name:_,id:_,value:s(l=>{var r;return(r=l.term)==null?void 0:r.contenuto},[t]),placeholder:_}},3,"0z_2")],1,null),e("div",null,{class:"pt-10 border-t border-gray-100 dark:border-gray-800 flex justify-end gap-4"},[e("button",null,{type:"button",class:"px-8 py-4 rounded-2xl font-bold text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-800 transition-all",onClick$:d(()=>c(()=>Promise.resolve().then(()=>A),void 0),"s_PlUU0pDGBQ0",[n])},"Annulla",3,null),e("button",null,{type:"submit",disabled:s(l=>l.value,[o]),class:"px-10 py-4 rounded-2xl bg-emerald-700 text-white font-black text-lg shadow-xl shadow-emerald-500/20 hover:transform hover:-translate-y-1 transition-all disabled:opacity-50"},s((l,r)=>l.value?"Salvataggio...":r.isNew?"Crea Termine":"Salva Modifiche",[o,t]),3,null)],3,null)],1,null),1,"0z_3")},V=Object.freeze(Object.defineProperty({__proto__:null,s_nfGd7c0SHVM:O},Symbol.toStringTag,{value:"Module"})),T=({track:t})=>{var i;const[n,o]=g();t(()=>o.term),(i=o.term)!=null&&i.audio&&(n.value=o.term.audio.startsWith("media/")?"/"+o.term.audio:f.files.getUrl(o.term,o.term.audio))},E=Object.freeze(Object.defineProperty({__proto__:null,_hW:v,s_EL7rnMcdsok:T},Symbol.toStringTag,{value:"Module"})),L=()=>{const[t]=g();new Audio(t.value).play().catch(o=>alert("Errore: "+o.message))},D=Object.freeze(Object.defineProperty({__proto__:null,s_QcrNlhN3hpg:L},Symbol.toStringTag,{value:"Module"}));export{v as _hW,V as d,z as s_1K80MJWNg0Y,T as s_EL7rnMcdsok,j as s_PlUU0pDGBQ0,L as s_QcrNlhN3hpg,O as s_nfGd7c0SHVM,S as s_oLvQleq6AwU};
