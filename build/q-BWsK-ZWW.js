import{_ as M}from"./q-DoNi8vyY.js";import{h as ce,c as ue,C as de,b as _e,D as ve,R as pe,d as fe,e as me,f as ye,i as Se,t as he,j as i,k as w,m as G,n as T,Q as te,r as oe,o as ne,l as re,q as K,v as Ce,w as we,x,y as D,z as be,A as ge,B as Ee}from"./q-Dffzb0DX.js";import{o as qe,p as Le,m as N,r as Re,i as B,n as C,q as U,s as Pe,b as ke,S as De,d as se,t as ae,c as F,v as Ie,w as $e,x as Ae}from"./q-BrAWZM5D.js";import{c as W,m as Y,r as Z}from"./q-BTiTA9UG.js";const Ge=a=>{qe(U(()=>M(()=>Promise.resolve().then(()=>Ne),void 0),"s_K4gvalEGCME"));const n=ce();if(!(n!=null&&n.params))throw new Error("Missing Qwik City Env Data for help visit https://github.com/QwikDev/qwik/issues/6237");const m=Le("url");if(!m)throw new Error("Missing Qwik URL Env Data");const v=new URL(m),s=N({url:v,params:n.params,isNavigating:!1,prevUrl:void 0},{deep:!1}),q={},u=Re(N(n.response.loaders,{deep:!1})),y=B({type:"initial",dest:v,forceReload:!1,replaceState:!1,scroll:!0}),S=N(ue),L=N({headings:void 0,menu:void 0}),l=B(),t=n.response.action,_=t?n.response.loaders[t]:void 0,c=B(_?{id:t,data:n.response.formData,output:{result:_,status:n.response.status}}:void 0),R=U(()=>M(()=>Promise.resolve().then(()=>ze),void 0),"s_qGVD1Sz413o"),j=U(()=>M(()=>Promise.resolve().then(()=>Te),void 0),"s_aww2BzpANGM",[c,q,y,s]);return C(de,L),C(_e,l),C(ve,S),C(pe,s),C(fe,j),C(me,u),C(ye,c),C(Se,R),Pe(U(()=>M(()=>Promise.resolve().then(()=>He),void 0),"s_Ysfvd0zsHZc",[c,L,l,S,n,j,u,q,a,y,s])),ke(De,null,3,"ni_3")},xe=async(a,n)=>{const[m,v,s,q]=se(),{type:u="link",forceReload:y=a===void 0,replaceState:S=!1,scroll:L=!0}=typeof n=="object"?n:{forceReload:n};T.navCount++,u==="link"&&s.value.type==="initial"&&(s.value.dest=new URL(window.location.href));const l=s.value.dest,t=a===void 0?l:typeof a=="number"?a:he(a,q.url);if(i.$cbs$&&(y||typeof t=="number"||!w(t,l)||!G(t,l))){const _=T.navCount,c=await Promise.all([...i.$cbs$.values()].map(R=>R(t)));if(_!==T.navCount||c.some(Boolean)){_===T.navCount&&u==="popstate"&&history.pushState(null,"",l);return}}if(typeof t=="number"){history.go(t);return}if(!G(t,l)){location.href=t.href;return}if(!y&&w(t,l)){{u==="link"&&t.href!==location.href&&history.pushState(null,"",t);const _=document.getElementById(te)??document.documentElement;oe(u,t,new URL(location.href),_,ne()),u==="popstate"&&(window._qCityScrollEnabled=!0)}return}return s.value={type:u,dest:t,forceReload:y,replaceState:S,scroll:L},re(t,ae()),K(Z,Y,W,t.pathname),m.value=void 0,q.isNavigating=!0,new Promise(_=>{v.r=_})},Te=Object.freeze(Object.defineProperty({__proto__:null,_hW:F,s_aww2BzpANGM:xe},Symbol.toStringTag,{value:"Module"})),je=a=>(i.$handler$||(i.$handler$=n=>{if(T.navCount++,!i.$cbs$)return;[...i.$cbs$.values()].map(v=>v.resolved?v.resolved():v()).some(Boolean)&&(n.preventDefault(),n.returnValue=!0)}),(i.$cbs$||(i.$cbs$=new Set)).add(a),a.resolve(),window.addEventListener("beforeunload",i.$handler$),()=>{i.$cbs$&&(i.$cbs$.delete(a),i.$cbs$.size||(i.$cbs$=void 0,window.removeEventListener("beforeunload",i.$handler$)))}),ze=Object.freeze(Object.defineProperty({__proto__:null,_hW:F,s_qGVD1Sz413o:je},Symbol.toStringTag,{value:"Module"})),Oe=({track:a})=>{const[n,m,v,s,q,u,y,S,L,l,t]=se();async function _(){var J;const c=a(l),R=a(n),j=Ie(""),b=t.url,f=R?"form":c.type,ie=c.replaceState;let r,I,Q=null,z;{r=new URL(c.dest,location),r.pathname.endsWith("/")||(r.pathname+="/");let O=K(Z,Y,W,r.pathname);z=ae();const $=I=await re(r,z,{action:R,clearCache:!0});if(!$){l.untrackedValue={type:f,dest:r};return}const H=$.href,A=new URL(H,r);w(A,r)||($.isRewrite||(r=A),O=K(Z,Y,W,A.pathname));try{Q=await O}catch(P){console.error(P),window.location.href=H;return}}if(Q){const[O,$,H,A]=Q,P=H,le=P[P.length-1];c.dest.search&&w(r,b)&&(r.search=c.dest.search),w(r,b)||(t.prevUrl=b),t.url=r,t.params={...$},l.untrackedValue={type:f,dest:r};const k=Ce(I,t,P,j);m.headings=le.headings,m.menu=A,v.value=$e(P),s.links=k.links,s.meta=k.meta,s.styles=k.styles,s.scripts=k.scripts,s.title=k.title,s.frontmatter=k.frontmatter;{L.viewTransition!==!1&&(document.__q_view_transition__=!0);let X;f==="popstate"&&(X=ne());const g=document.getElementById(te)??document.documentElement;(c.scroll&&(!c.forceReload||!w(r,b))&&(f==="link"||f==="popstate")||f==="form"&&!w(r,b))&&(document.__q_scroll_restore__=()=>oe(f,r,b,g,X));const ee=I==null?void 0:I.loaders,e=window;if(ee&&Object.assign(y,ee),we.clear(),!e._qCitySPA){if(e._qCitySPA=!0,history.scrollRestoration="manual",e.addEventListener("popstate",()=>{e._qCityScrollEnabled=!1,clearTimeout(e._qCityScrollDebounce),u(location.href,{type:"popstate"})}),e.removeEventListener("popstate",e._qCityInitPopstate),e._qCityInitPopstate=void 0,!e._qCityHistoryPatch){e._qCityHistoryPatch=!0;const d=history.pushState,h=history.replaceState,E=o=>(o===null||typeof o>"u"?o={}:(o==null?void 0:o.constructor)!==Object&&(o={_data:o}),o._qCityScroll=o._qCityScroll||D(g),o);history.pushState=(o,p,V)=>(o=E(o),d.call(history,o,p,V)),history.replaceState=(o,p,V)=>(o=E(o),h.call(history,o,p,V))}document.addEventListener("click",d=>{if(d.defaultPrevented)return;const h=d.target.closest("a[href]");if(h&&!h.hasAttribute("preventdefault:click")){const E=h.getAttribute("href"),o=new URL(location.href),p=new URL(E,o);if(G(p,o)&&w(p,o)){if(d.preventDefault(),!p.hash&&!p.href.endsWith("#")){p.href!==o.href&&history.pushState(null,"",p),e._qCityScrollEnabled=!1,clearTimeout(e._qCityScrollDebounce),x({...D(g),x:0,y:0}),location.reload();return}u(h.getAttribute("href"))}}}),document.removeEventListener("click",e._qCityInitAnchors),e._qCityInitAnchors=void 0,window.navigation||(document.addEventListener("visibilitychange",()=>{if(e._qCityScrollEnabled&&document.visibilityState==="hidden"){const d=D(g);x(d)}},{passive:!0}),document.removeEventListener("visibilitychange",e._qCityInitVisibility),e._qCityInitVisibility=void 0),e.addEventListener("scroll",()=>{e._qCityScrollEnabled&&(clearTimeout(e._qCityScrollDebounce),e._qCityScrollDebounce=setTimeout(()=>{const d=D(g);x(d),e._qCityScrollDebounce=void 0},200))},{passive:!0}),removeEventListener("scroll",e._qCityInitScroll),e._qCityInitScroll=void 0,(J=e._qCityBootstrap)==null||J.remove(),e._qCityBootstrap=void 0,be.resolve()}if(f!=="popstate"){e._qCityScrollEnabled=!1,clearTimeout(e._qCityScrollDebounce);const d=D(g);x(d)}ge(window,f,b,r,ie),Ae(z).then(()=>{var E;Ee(z).setAttribute("q:route",O);const h=D(g);x(h),e._qCityScrollEnabled=!0,t.isNavigating=!1,(E=S.r)==null||E.call(S)})}}}_()},He=Object.freeze(Object.defineProperty({__proto__:null,_hW:F,s_Ysfvd0zsHZc:Oe},Symbol.toStringTag,{value:"Module"})),Me=":root{view-transition-name:none}",Ne=Object.freeze(Object.defineProperty({__proto__:null,s_K4gvalEGCME:Me},Symbol.toStringTag,{value:"Module"}));export{F as _hW,Me as s_K4gvalEGCME,Oe as s_Ysfvd0zsHZc,xe as s_aww2BzpANGM,Ge as s_p1yCGpFL1xE,je as s_qGVD1Sz413o};
