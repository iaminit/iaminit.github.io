import{d as v,i as u,l as y,q as d,z as e,b as h,g as b,h as _,D as m,c as p}from"./q-BrAWZM5D.js";import{_auto_loadPosts as x}from"./q-xtshRHGp.js";import{p as f}from"./q-C2EB_Z9y.js";import{_ as g}from"./q-DoNi8vyY.js";const w=l=>{const[t]=v();return t.value=l.target.value},k=Object.freeze(Object.defineProperty({__proto__:null,s_iBGHLriwfTI:w},Symbol.toStringTag,{value:"Module"})),P=async({track:l})=>{const[t,r,i,a]=v();l(()=>a.value),i.value=!0;try{const{bacheca:s,archivio:n}=await x(),c=o=>!a.value||o.title.toLowerCase().includes(a.value.toLowerCase())||o.activity&&o.activity.toLowerCase().includes(a.value.toLowerCase());r.value=s.filter(c),t.value=n.filter(c)}catch(s){console.error("Error loading posts:",s)}finally{i.value=!1}},S=Object.freeze(Object.defineProperty({__proto__:null,_hW:p,s_hx0OgrSpjHo:P},Symbol.toStringTag,{value:"Module"})),T=()=>{const[l,t]=v();return l(t.id,t.title)},O=Object.freeze(Object.defineProperty({__proto__:null,s_e6oaVXXueHs:T},Symbol.toStringTag,{value:"Module"})),j=async(l,t)=>{const[r,i]=v();if(confirm(`Sei sicuro di voler eliminare la news "${t}"?`))try{await f.collection("bacheca").delete(l);const{bacheca:a,archivio:s}=await x();i.value=a,r.value=s}catch(a){alert("Errore: "+a.message)}},L=Object.freeze(Object.defineProperty({__proto__:null,_hW:p,s_HKkvaheyOb4:j},Symbol.toStringTag,{value:"Module"})),E=()=>{const l=u(""),t=u([]),r=u([]),i=u(!0);y(d(()=>g(()=>Promise.resolve().then(()=>S),void 0),"s_hx0OgrSpjHo",[r,t,i,l]));const a=d(()=>g(()=>Promise.resolve().then(()=>L),void 0),"s_HKkvaheyOb4",[r,t]),s=({title:n,posts:c})=>e("section",null,{class:"space-y-6"},[e("h2",null,{class:"text-3xl font-black text-gray-900 dark:text-white"},n,1,null),i.value?e("div",null,{class:"flex justify-center py-12"},e("div",null,{class:"animate-spin h-8 w-8 border-4 border-red-600 border-t-transparent rounded-full"},null,3,null),3,"00_0"):c.length===0?e("div",null,{class:"text-center py-12 text-gray-500 dark:text-gray-400"},"Nessun post da mostrare.",3,"00_1"):e("div",null,{class:"grid gap-6 md:grid-cols-2"},c.map(o=>e("div",null,{class:"bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700 p-6 group hover:shadow-lg transition-shadow"},[e("h3",null,{class:"text-xl font-bold text-gray-900 dark:text-white mb-2"},m(o,"title"),1,null),e("div",null,{class:"mb-4"},e("span",null,{class:"px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded text-xs font-bold text-gray-500 uppercase tracking-widest border border-gray-200 dark:border-gray-600"},o.activity||"GENERALE",1,null),1,null),e("div",null,{class:"flex justify-between items-center text-sm text-gray-500 dark:text-gray-400"},[e("span",null,null,new Date(o.date).toLocaleDateString("it-IT"),1,null),e("div",null,{class:"flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity"},[e("a",{href:`/gestione/bacheca/${o.id}`},{class:"text-blue-600 hover:underline"},"Modifica",3,null),e("button",{onClick$:d(()=>g(()=>Promise.resolve().then(()=>O),void 0),"s_e6oaVXXueHs",[a,o])},{class:"text-red-600 hover:underline"},"Elimina",2,null)],1,null)],1,null)],1,o.id)),1,null)],1,"00_2");return e("div",null,{class:"max-w-5xl mx-auto p-6 space-y-12 animate-in fade-in duration-500"},[e("header",null,{class:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-8"},[e("div",null,null,[e("h1",null,{class:"text-3xl font-black text-gray-900 dark:text-white"},"Bacheca",3,null),e("p",null,{class:"text-gray-500 dark:text-gray-400"},"Gestisci le news, gli eventi e le comunicazioni del Dojo.",3,null)],3,null),e("a",null,{href:"/gestione/bacheca/new",class:"bg-orange-600 text-white px-6 py-3 rounded-xl font-bold shadow-lg hover:scale-105 transition-transform flex items-center gap-2"},[e("span",null,null,"âž•",3,null),e("span",null,null,"Nuova News",3,null)],3,null)],3,null),e("div",null,{class:"relative max-w-md mb-8"},[e("span",null,{class:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400"},"ðŸ”",3,null),e("input",null,{type:"text",placeholder:"Cerca titolo o attivitÃ ...",class:"w-full pl-12 pr-4 py-3 rounded-xl bg-gray-50 dark:bg-gray-800 border-none focus:ring-2 focus:ring-orange-500 outline-none text-gray-900 dark:text-white font-medium",value:b(n=>n.value,[l]),onInput$:d(()=>g(()=>Promise.resolve().then(()=>k),void 0),"s_iBGHLriwfTI",[l])},null,3,null)],3,null),h(s,{title:"ðŸ“š Bacheca",get posts(){return t.value},[_]:{title:_,posts:b(n=>n.value,[t])}},3,"00_3"),h(s,{title:"ðŸ“ Archivio",get posts(){return r.value},[_]:{title:_,posts:b(n=>n.value,[r])}},3,"00_4")],1,"00_5")},A=Object.freeze(Object.defineProperty({__proto__:null,s_aF9mdhgJTN0:E},Symbol.toStringTag,{value:"Module"}));export{p as _hW,A as i,j as s_HKkvaheyOb4,E as s_aF9mdhgJTN0,T as s_e6oaVXXueHs,P as s_hx0OgrSpjHo,w as s_iBGHLriwfTI};
